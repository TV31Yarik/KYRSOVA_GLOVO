<div id="cart-sidebar" class="p-3 position-relative cart-sidebar d-flex flex-column">
  <button class="btn btn-light close-cart-btn position-absolute top-0 end-0 m-2" aria-label="Закрити кошик">
    <i class="bi bi-arrow-right fs-4"></i>
  </button>

  <h5 class="mb-3 pe-4">
    <i class="bi bi-cart"></i> Кошик
  </h5>

  {% if cart_items %}
    <ul class="list-group mb-3 flex-grow-1 overflow-auto">
      {% for item in cart_items %}
        <li class="list-group-item d-flex justify-content-between align-items-start">
          <img src="{{ item.product.main_image.url }}" alt="{{ item.product.name }}" width="70" height="70" class="me-2 rounded">
          <div class="flex-grow-1">
            <strong>{{ item.product.name }}</strong><br>
            <small>{{ item.product.price }} ₴ × 
              <span class="quantity" data-id="{{ item.id }}">{{ item.quantity }}</span>
            </small><br>
            <small class="text-muted">Сума: {{ item.get_total_price }} ₴</small>
          </div>
          <div class="d-flex flex-column align-items-end">
            <div class="d-flex mb-1">
              <button class="btn btn-sm btn-outline-secondary me-1 change-qty" data-id="{{ item.id }}" data-op="minus">−</button>
              <button class="btn btn-sm btn-outline-secondary me-1 change-qty" data-id="{{ item.id }}" data-op="plus">+</button>
            </div>
            <button class="btn btn-sm btn-outline-danger delete-item" data-id="{{ item.id }}">
              <i class="bi bi-x-lg"></i>
            </button>
          </div>
        </li>
      {% endfor %}
    </ul>

    <div class="mb-3 text-end">
      <strong>Загалом: {{ total }} ₴</strong>
    </div>
  {% else %}
    <p>Кошик порожній.</p>
  {% endif %}

  <div class="text-center mt-auto ">
    <a href="{%url 'checkout'%}" class="btn btn-success w-100">
      Оформити замовлення
    </a>
  </div>
</div>
